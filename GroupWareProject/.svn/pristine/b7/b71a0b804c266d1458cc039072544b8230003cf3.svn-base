<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>

<div class="card bg-info-subtle shadow-none position-relative overflow-hidden mb-4">
	<div class="card-body px-4 py-3">
		<div class="row align-items-center">
			<div class="col-9">
				<h4 class="fw-semibold mb-8">Email</h4>
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a class="text-muted text-decoration-none" href="/">Home</a></li>
						<li class="breadcrumb-item" aria-current="page">Email</li>
					</ol>
				</nav>
			</div>
			<div class="col-3">
				<div class="text-center mb-n5">
					<img src="${pageContext.request.contextPath}/resources/vendor/images/breadcrumb/ChatBc.png" alt="" class="img-fluid mb-n4" />
				</div>
			</div>
		</div>
	</div>
</div>

<div class="card overflow-hidden chat-application">
	<div class="d-flex align-items-center justify-content-between gap-6 m-3 d-lg-none">
		<button class="btn btn-primary d-flex" type="button" data-bs-toggle="offcanvas" data-bs-target="#chat-sidebar" aria-controls="chat-sidebar">
			<i class="ti ti-menu-2 fs-5"></i>
		</button>
		<form class="position-relative w-100">
			<input type="text" class="form-control search-chat py-2 ps-5" id="text-srh" placeholder="Search Contact">
			<i class="ti ti-search position-absolute top-50 start-0 translate-middle-y fs-6 text-dark ms-3"></i>
		</form>
	</div>
	<div class="d-flex w-100">
		<div class="left-part border-end w-20 flex-shrink-0 d-none d-lg-block h-auto">
			<div class="px-9 pt-4 pb-3">
				<button class="btn btn-primary fw-semibold py-8 w-100">메일 쓰기</button>
			</div>
			<ul class="list-group mh-n100" data-simplebar>
				<li class="border-bottom my-3"></li>
				<li class="list-group-item border-0 p-0 mx-9"><a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-8 mb-1 rounded-1" href="javascript:void(0)">
						<i class="ti ti-inbox fs-5"></i>받은메일함
					</a></li>
				<li class="list-group-item border-0 p-0 mx-9"><a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-8 mb-1 rounded-1" href="javascript:void(0)">
						<i class="ti ti-brand-telegram fs-5"></i>보낸메일함
					</a></li>
				<li class="list-group-item border-0 p-0 mx-9"><a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-8 mb-1 rounded-1" href="javascript:void(0)">
						<i class="ti ti-inbox fs-5"></i>안읽은메일함
					</a></li>
				<li class="list-group-item border-0 p-0 mx-9"><a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-8 mb-1 rounded-1" href="javascript:void(0)">
						<i class="ti ti-file-text fs-5"></i>임시보관함
					</a></li>
				<li class="list-group-item border-0 p-0 mx-9"><a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-8 mb-1 rounded-1" href="javascript:void(0)">
						<i class="ti ti-inbox fs-5"></i>내게쓴메일함
					</a></li>
				<li class="border-bottom my-3"></li>
				<li class="fw-semibold text-dark text-uppercase mx-9 my-2 px-3 fs-2">IMPORTANT</li>
				<li class="list-group-item border-0 p-0 mx-9"><a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-8 mb-1 rounded-1" href="javascript:void(0)">
						<i class="ti ti-star fs-5"></i>중요메일함
					</a></li>
				<li class="list-group-item border-0 p-0 mx-9"><a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-8 mb-1 rounded-1" href="javascript:void(0)" class="d-block ">
						<i class="ti ti-badge fs-5"></i>예약메일함
					</a></li>
				<li class="border-bottom my-3"></li>
				<li class="list-group-item border-0 p-0 mx-9"><a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-8 mb-1 rounded-1" href="javascript:void(0)">
						<i class="ti ti-trash fs-5"></i>휴지통
					</a></li>
			</ul>
		</div>
		<!-- 메뉴 옆 오른쪽 구역 시작 -->
		<div class="w-100">
			<div class="min-width-340">
				<div class="border-end user-chat-box h-100">
					<div class="px-4 pt-9 pb-6 d-none d-lg-block">
						<form class="position-relative">
							<input type="text" class="form-control search-chat py-2 ps-5" id="text-srh" placeholder="Search" />
							<i class="ti ti-search position-absolute top-50 start-0 translate-middle-y fs-6 text-dark ms-3"></i>
						</form>
					</div>
					<div class="app-chat">
						<ul class="chat-users mh-n100" data-simplebar>
							<!-- 메일 목록 시작 -->
							<c:forEach items="${emailList }" var="email">
								<li onclick="detail(${email.emailNo })"><a href="javascript:void(0)" class="px-4 py-3 bg-hover-light-black d-flex align-items-start justify-content-between chat-user" id="chat_user_3" data-user-id="3">
										<div class="form-check mb-0">
											<input class="form-check-input" type="checkbox" value="" id="flexCheckDefault2">
										</div>
										<div class="position-relative w-100 ms-2">
											<div class="d-flex align-items-center justify-content-between mb-2">
												<h6 class="mb-0">${email.senderVO.emplNm }</h6>
<!-- 												<span class="badge text-bg-success fs-2 rounded-4 py-1 px-2">Health</span> -->
											</div>
											<h6 class="text-dark">${email.emailNm }</h6>
											<div class="d-flex align-items-center justify-content-between">
												<div class="d-flex align-items-center">
													<span><i class="ti ti-star fs-4 me-2 text-muted"></i></span> <span class="d-block"><i class="ti ti-alert-circle text-warning"></i></span>
												</div>
												<p class="mb-0 fs-2 text-muted"><fmt:formatDate value="${email.emailRgdde }" pattern="yyyy.MM.dd a hh:mm:ss"/> </p>
											</div>
										</div>
									</a></li>
							</c:forEach>
							<!-- 메일 목록 끝 -->
						</ul>
					</div>
				</div>
			</div>
		</div>
		<!-- 메뉴 옆 오른쪽 구역 끝 -->
	</div>
</div>

<script src="${pageContext.request.contextPath}/resources/vendor/js/apps/chat.js"></script>
<script>

function detail(emailNo) {
	location.href="/mail/detail?emailNo="+emailNo;
}

</script>