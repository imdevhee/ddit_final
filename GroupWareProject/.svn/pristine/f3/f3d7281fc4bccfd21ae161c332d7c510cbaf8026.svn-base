<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<style>

.checkbox-label {
    font-size: larger; /* 원하는 크기로 조절 */
}
.checkbox {
    width: 20px; /* 원하는 너비로 조절 */
    height: 20px; /* 원하는 높이로 조절 */
    vertical-align: middle; /* 가운데 정렬 */
}

</style>


<c:set value="문서양식 입력" var="headerText" />
<c:if test="${status eq 'u' }">
	<c:set value="문서양식 편집" var="headerText" />
</c:if>

<form class="card card-body" id="docForm" method="post" action="/documents/insertdocform">
	<h4>${headerText}</h4>
	<c:if test="${status eq 'u' }">
		<input type="hidden" name="docNo" value="${selectOne.docNo }" />
	</c:if>
	<div class="row">
		<div class="col-md-8">
            <div class="row">
                <div class="col-md-2">
                    <select class="form-select mb-2" aria-label="doc-type-code" id="docTypeCode" name="docTypeCode">
                        <option selected>분류선택</option>
                        <option value="F101" ${selectOne.docTypeCode == 'F101' ? 'selected' : ''}>일반</option>
                        <option value="F102" ${selectOne.docTypeCode == 'F102' ? 'selected' : ''}>지원</option>
                        <option value="F103" ${selectOne.docTypeCode == 'F103' ? 'selected' : ''}>인사</option>
                        <option value="F104" ${selectOne.docTypeCode == 'F104' ? 'selected' : ''}>휴가</option>
                    </select>
                </div>
                <div class="col-md-2 d-flex align-items-center">
                    <label for="useYnCheckbox" class="checkbox-label me-1">사용여부</label>
                    <input type="checkbox" id="useYnCheckbox" class="form-check-input primary" ${status eq 'u' && selectOne.useYn == 'Y' ? 'checked' : 'checked'}>
                	<input type="hidden" id="useYnHidden" name="useYn" value="">
                </div>
            </div>
			<div class="input-group input-group-outline mb-2">
				<input type="text" class="form-control" id="docNm" name="docNm" value="${selectOne.docNm }" placeholder="제목을 입력해주세요.">
			</div>
		</div>
		<div class="col-md-8">
			<div class="input-group input-group-outline">
				<textarea class="form-control" id="docCn" name="docCn">${selectOne.docCn }</textarea>
			</div>
		</div>
		<div class="col-md-8">
			<div class="input-group input-group-outline">
				<!-- <input type="file" class="form-control" id="boFile" name="boFile" multiple="multiple" /> -->
			</div>
		</div>
		<div class="col-md-8">
			<br />
		</div>
		<div class="col-md-8">
			<div class="row">
				<div class="col-md-2">
					<div class="card"></div>
				</div>
			</div>
		</div>
		<div class="col-md-12">
			<!-- 분기처리 -->
			<c:set value="등록" var="btnText" />
			<c:if test="${status eq 'u' }">
				<c:set value="수정" var="btnText" />
			</c:if>
			<button type="button" class="btn btn-primary" id="insertBtn">${btnText }</button>
			<c:if test="${status eq 'u' }">
				<button type="button" class="btn btn-danger" id="cancelBtn">취소</button>
			</c:if>
			<c:if test="${status ne 'u' }">
				<button type="button" class="btn btn-info" id="listBtn" onclick="javascript:location.href='/documents/list'">목록</button>
			</c:if>
		</div>
	</div>
	<sec:csrfInput />
</form>


<script src="${pageContext.request.contextPath }/resources/vendor/libs/ckeditor/ckeditor.js"></script>
<script type="text/javascript">
	$(function() {
		var editor = CKEDITOR.instances.docCn;
		var insertBtn = $("#insertBtn");
		var docForm = $("#docForm");
		CKEDITOR.replace("docCn");
		CKEDITOR.config.width = "100%";
		CKEDITOR.config.height = "400px";

		insertBtn.on("click", function() {
			var docTypeCode = $("#docTypeCode").val();
			var docNm = $("#docNm").val();
			var content = CKEDITOR.instances.docCn.getData();
			var useYn = $("#useYnCheckbox").prop("checked") ? "Y" : "N";
			$("#useYnHidden").val(useYn);
			if ($(this).text() == "수정") {
				docForm.attr("action", "/documents/modifydocform");
			}

			docForm.submit();
		});
	});

	$(document).ready(function() {
		$('#cancelBtn').click(function() {
			window.location.href = '/documents/list';
		});
	});
</script>
