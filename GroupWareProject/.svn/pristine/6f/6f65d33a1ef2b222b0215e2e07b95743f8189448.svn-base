<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec"%>

<style>
.accordion-button {
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.accordion-button span {
	flex: 1;
	text-align: center;
}

thead tr:first-child td {
	border-bottom: 1px solid #dee2e6;
}

.accordion-button:focus {
	box-shadow: none !important; /* 기존 속성 덮어쓰기 */
}
td {
    text-align: left;
}
/* tr#th td { */
/*     text-align: center; */
/* } */
</style>

<!-- 메뉴 옆 오른쪽 구역 시작 -->
<div class="w-100">
	<div class="min-width-340">
		<h4 class="fw-semibold mb-8" style="margin-left: 0px">근태현황</h4>
		<br />
		<!-- < 2024. 04 > -->
		<div class="position-relative text-center" style="margin-bottom: 30px">
			<h4>
				<a class="text-dark px-2 fs-5 bg-hover-primary nav-icon-hover position-relative" style="cursor: pointer;" onclick="previous()">
					<i class="fa-solid fa-chevron-left fa-xs"></i>
				</a>
				<span class="fw-semibold mb-8" id="baseDate" style="margin: 15px">&nbsp;${year}.${month}</span>
				<a class="text-dark px-2 fs-5 bg-hover-primary nav-icon-hover position-relative" style="cursor: pointer;" onclick="next()">
					<i class="fa-solid fa-chevron-right fa-xs"></i>
				</a>
			</h4>
		</div>
		<!-- < 2024.04 > -->

		<!-- 목록 다운로드 -->
		<div class="d-flex align-items-center">
			<div class="col-10"></div>
			<dib class="col-2">
			<button type="button" class="justify-content-center w-100 btn mb-1 bg-primary-subtle text-primary  d-flex align-items-center" style="margin-right: 20px">
				<i class="fa-duotone fa-arrow-down-to-line"></i>&nbsp;&nbsp;목록 다운로드
			</button>
		</div>
		<!-- 목록 다운로드 -->

		<!-- 이번주 현황 테이블 -->
		<table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd; margin-top: 15px; margin-bottom: 40px;">
			<tr>
				<td style="padding: 4px; padding-top: 30px; text-align: center; color: black;">이번주 누적</td>
				<td style="padding: 4px; padding-top: 30px; text-align: center; color: black;">이번주 초과</td>
				<td style="padding: 4px; padding-top: 30px; text-align: center; color: black;">이번주 잔여</td>
				<td style="padding: 4px; padding-top: 30px; text-align: center; color: grey;">이번달 누적</td>
				<td style="padding: 4px; padding-top: 30px; text-align: center; color: grey;">이번달 연장</td>
			</tr>
			<tr>
				<td style="padding: 4px; padding-bottom: 30px; text-align: center; font-size: 23px; color: #739ee8;">11h 19m 28s</td>
				<td style="padding: 4px; padding-bottom: 30px; text-align: center; font-size: 23px; color: #739ee8;">11h 19m 28s</td>
				<td style="padding: 4px; padding-bottom: 30px; text-align: center; font-size: 23px; color: #739ee8;">11h 19m 28s</td>
				<td style="padding: 4px; padding-bottom: 30px; text-align: center; font-size: 23px; color: grey;">11h 19m 28s</td>
				<td style="padding: 4px; padding-bottom: 30px; text-align: center; font-size: 23px; color: grey;">11h 19m 28s</td>
			</tr>
		</table>
		<!-- 이번주 현황 테이블 -->

		<!-- 1주차 ~ 5주차 -->
		<div class="accordion accordion-flush" id="accordionFlushExample" style="margin-bottom: 30px;">
			<div class="accordion-item">
				<h2 class="accordion-header" id="flush-headingOne">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
						<span style="float: left; font-size: 16px;"><b>1 주차</b></span> <span style="float: right; color: grey;"><b>누적 근무시간 15h 12m 44s</b> (초과 근무시간 0h 0m 0s)</span>
					</button>
				</h2>
				<div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne">
					<div class="accordion-body">
						<table class="table table-borderless table-hover text-center align-middle">
							<thead>
								<tr id="th">
									<td>일자</td>
									<td>업무시작</td>
									<td>업무종료</td>
									<td>총 근무시간</td>
									<td>근무시간 상세</td>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${allDataList}" var="dclzStatus" begin="0" end="6" varStatus="stat">
									<tr>
										<c:choose>
											<c:when test="${stat.index == 5}">
												<td style="color: grey;">
											</c:when>
											<c:when test="${stat.index == 6}">
												<td style="color: #ff3838;">
											</c:when>
											<c:otherwise>
												<td>
											</c:otherwise>
										</c:choose>
										<fmt:formatDate value="${dclzStatus.date}" pattern="dd E" />
										</td>
										<c:choose>
											<c:when test="${empty dclzStatus.attendDt }">
												<td colspan="4">결근, 휴가, 이유 같은 거?</td>
											</c:when>
											<c:otherwise>
												<c:choose>
													<c:when test="${dclzStatus.attendDt.hours gt 9 || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes gt 0) || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes eq 0 && dclzStatus.attendDt.seconds gt 0)}">
														<td style="color: #ff3838;">
													</c:when>
													<c:otherwise>
														<td>
													</c:otherwise>
												</c:choose>
												<fmt:formatDate value="${dclzStatus.attendDt}" pattern="HH:mm:ss" />
												</td>
												<td>
													<fmt:formatDate value="${dclzStatus.lvffcDt}" pattern="HH:mm:ss" />
												</td>
												<td><b>${dclzStatus.defaultTime }</b></td>
												<td>기본 ${dclzStatus.defaultTime } / 연장 ${dclzStatus.overTime } / 야간 ${dclzStatus.nightTime }</td>
											</c:otherwise>
										</c:choose>
									</tr>
								</c:forEach>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="flush-headingTwo">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
						<span style="float: left; font-size: 16px;"><b>2 주차</b></span> <span style="float: right; color: grey;"><b>누적 근무시간 15h 12m 44s</b> (초과 근무시간 0h 0m 0s)</span>
					</button>
				</h2>
				<div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo">
					<div class="accordion-body">
						<table class="table table-borderless table-hover text-center align-middle">
							<thead>
								<tr>
									<td>일자</td>
									<td>업무시작</td>
									<td>업무종료</td>
									<td>총 근무시간</td>
									<td>근무시간 상세</td>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${allDataList}" var="dclzStatus" begin="7" end="13" varStatus="stat">
									<tr>
										<c:choose>
											<c:when test="${stat.index == 12}">
												<td style="color: grey;">
											</c:when>
											<c:when test="${stat.index == 13}">
												<td style="color: #ff3838;">
											</c:when>
											<c:otherwise>
												<td>
											</c:otherwise>
										</c:choose>
										<fmt:formatDate value="${dclzStatus.date}" pattern="dd E" />
										</td>
										<c:choose>
											<c:when test="${empty dclzStatus.attendDt }">
												<td colspan="4">결근, 휴가, 이유 같은 거?</td>
											</c:when>
											<c:otherwise>
												<c:choose>
													<c:when test="${dclzStatus.attendDt.hours gt 9 || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes gt 0) || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes eq 0 && dclzStatus.attendDt.seconds gt 0)}">
														<td style="color: #ff3838;">
													</c:when>
													<c:otherwise>
														<td>
													</c:otherwise>
												</c:choose>
												<fmt:formatDate value="${dclzStatus.attendDt}" pattern="HH:mm:ss" />
												</td>
												<td>
													<fmt:formatDate value="${dclzStatus.lvffcDt}" pattern="HH:mm:ss" />
												</td>
												<td><b>${dclzStatus.defaultTime }</b></td>
												<td>기본 ${dclzStatus.defaultTime } / 연장 ${dclzStatus.overTime } / 야간 ${dclzStatus.nightTime }</td>
											</c:otherwise>
										</c:choose>
									</tr>
								</c:forEach>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="flush-headingThree">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
						<span style="float: left; font-size: 16px;"><b>3 주차</b></span> <span style="float: right; color: grey;"><b>누적 근무시간 15h 12m 44s</b> (초과 근무시간 0h 0m 0s)</span>
					</button>
				</h2>
				<div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree">
					<div class="accordion-body">
						<table class="table table-borderless table-hover text-center align-middle">
							<thead>
								<tr>
									<td>일자</td>
									<td>업무시작</td>
									<td>업무종료</td>
									<td>총 근무시간</td>
									<td>근무시간 상세</td>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${allDataList}" var="dclzStatus" begin="14" end="20" varStatus="stat">
									<tr>
										<c:choose>
											<c:when test="${stat.index == 19}">
												<td style="color: grey;">
											</c:when>
											<c:when test="${stat.index == 20}">
												<td style="color: #ff3838;">
											</c:when>
											<c:otherwise>
												<td>
											</c:otherwise>
										</c:choose>
										<fmt:formatDate value="${dclzStatus.date}" pattern="dd E" />
										</td>
										<c:choose>
											<c:when test="${empty dclzStatus.attendDt }">
												<td colspan="4">결근, 휴가, 이유 같은 거?</td>
											</c:when>
											<c:otherwise>
												<c:choose>
													<c:when test="${dclzStatus.attendDt.hours gt 9 || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes gt 0) || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes eq 0 && dclzStatus.attendDt.seconds gt 0)}">
														<td style="color: #ff3838;">
													</c:when>
													<c:otherwise>
														<td>
													</c:otherwise>
												</c:choose>
												<fmt:formatDate value="${dclzStatus.attendDt}" pattern="HH:mm:ss" />
												</td>
												<td>
													<fmt:formatDate value="${dclzStatus.lvffcDt}" pattern="HH:mm:ss" />
												</td>
												<td><b>${dclzStatus.defaultTime }</b></td>
												<td>기본 ${dclzStatus.defaultTime } / 연장 ${dclzStatus.overTime } / 야간 ${dclzStatus.nightTime }</td>
											</c:otherwise>
										</c:choose>
									</tr>
								</c:forEach>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="flush-heading4">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse4" aria-expanded="false" aria-controls="flush-collapse4">
						<span style="float: left; font-size: 16px;"><b>4 주차</b></span> <span style="float: right; color: grey;"><b>누적 근무시간 15h 12m 44s</b> (초과 근무시간 0h 0m 0s)</span>
					</button>
				</h2>
				<div id="flush-collapse4" class="accordion-collapse collapse" aria-labelledby="flush-heading4">
					<div class="accordion-body">
						<table class="table table-borderless table-hover text-center align-middle">
							<thead>
								<tr>
									<td>일자</td>
									<td>업무시작</td>
									<td>업무종료</td>
									<td>총 근무시간</td>
									<td>근무시간 상세</td>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${allDataList}" var="dclzStatus" begin="21" end="27" varStatus="stat">
									<tr>
										<c:choose>
											<c:when test="${stat.index == 26}">
												<td style="color: grey;">
											</c:when>
											<c:when test="${stat.index == 27}">
												<td style="color: #ff3838;">
											</c:when>
											<c:otherwise>
												<td>
											</c:otherwise>
										</c:choose>
										<fmt:formatDate value="${dclzStatus.date}" pattern="dd E" />
										</td>
										<c:choose>
											<c:when test="${empty dclzStatus.attendDt }">
												<td colspan="4">결근, 휴가, 이유 같은 거?</td>
											</c:when>
											<c:otherwise>
												<c:choose>
													<c:when test="${dclzStatus.attendDt.hours gt 9 || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes gt 0) || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes eq 0 && dclzStatus.attendDt.seconds gt 0)}">
														<td style="color: #ff3838;">
													</c:when>
													<c:otherwise>
														<td>
													</c:otherwise>
												</c:choose>
												<fmt:formatDate value="${dclzStatus.attendDt}" pattern="HH:mm:ss" />
												</td>
												<td>
													<fmt:formatDate value="${dclzStatus.lvffcDt}" pattern="HH:mm:ss" />
												</td>
												<td><b>${dclzStatus.defaultTime }</b></td>
												<td>기본 ${dclzStatus.defaultTime } / 연장 ${dclzStatus.overTime } / 야간 ${dclzStatus.nightTime }</td>
											</c:otherwise>
										</c:choose>
									</tr>
								</c:forEach>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="flush-heading5">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse5" aria-expanded="false" aria-controls="flush-collapse5">
						<span style="float: left; font-size: 16px;"><b>5 주차</b></span> <span style="float: right; color: grey;"><b>누적 근무시간 15h 12m 44s</b> (초과 근무시간 0h 0m 0s)</span>
					</button>
				</h2>
				<div id="flush-collapse5" class="accordion-collapse collapse" aria-labelledby="flush-heading5">
					<div class="accordion-body">
						<table class="table table-borderless table-hover text-center align-middle">
							<thead>
								<tr>
									<td>일자</td>
									<td>업무시작</td>
									<td>업무종료</td>
									<td>총 근무시간</td>
									<td>근무시간 상세</td>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${allDataList}" var="dclzStatus" begin="28" end="34" varStatus="stat">
									<tr>
										<c:choose>
											<c:when test="${stat.index == 33}">
												<td style="color: grey;">
											</c:when>
											<c:when test="${stat.index == 34}">
												<td style="color: #ff3838;">
											</c:when>
											<c:otherwise>
												<td>
											</c:otherwise>
										</c:choose>
										<fmt:formatDate value="${dclzStatus.date}" pattern="dd E" />
										</td>
										<c:choose>
											<c:when test="${empty dclzStatus.attendDt }">
												<td colspan="4">결근, 휴가, 이유 같은 거?</td>
											</c:when>
											<c:otherwise>
												<c:choose>
													<c:when test="${dclzStatus.attendDt.hours gt 9 || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes gt 0) || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes eq 0 && dclzStatus.attendDt.seconds gt 0)}">
														<td style="color: #ff3838;">
													</c:when>
													<c:otherwise>
														<td>
													</c:otherwise>
												</c:choose>
												<fmt:formatDate value="${dclzStatus.attendDt}" pattern="HH:mm:ss" />
												</td>
												<td>
													<fmt:formatDate value="${dclzStatus.lvffcDt}" pattern="HH:mm:ss" />
												</td>
												<td><b>${dclzStatus.defaultTime }</b></td>
												<td>기본 ${dclzStatus.defaultTime } / 연장 ${dclzStatus.overTime } / 야간 ${dclzStatus.nightTime }</td>
											</c:otherwise>
										</c:choose>
									</tr>
								</c:forEach>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<c:if test="${allDataList.size() > 35 }">
				<div class="accordion-item">
					<h2 class="accordion-header" id="flush-heading6">
						<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse6" aria-expanded="false" aria-controls="flush-collapse5">
							<span style="float: left; font-size: 16px;"><b>6 주차</b></span> <span style="float: right; color: grey;"><b>누적 근무시간 15h 12m 44s</b> (초과 근무시간 0h 0m 0s)</span>
						</button>
					</h2>
					<div id="flush-collapse6" class="accordion-collapse collapse" aria-labelledby="flush-heading6">
						<div class="accordion-body">
							<table class="table table-borderless table-hover text-center align-middle">
								<thead>
									<tr>
										<td>일자</td>
										<td>업무시작</td>
										<td>업무종료</td>
										<td>총 근무시간</td>
										<td>근무시간 상세</td>
									</tr>
								</thead>
								<tbody>
									<c:forEach items="${allDataList}" var="dclzStatus" begin="35" end="41" varStatus="stat">
										<tr>
										<c:choose>
											<c:when test="${stat.index == 40}">
												<td style="color: grey;">
											</c:when>
											<c:when test="${stat.index == 41}">
												<td style="color: #ff3838;">
											</c:when>
											<c:otherwise>
												<td>
											</c:otherwise>
										</c:choose>
										<fmt:formatDate value="${dclzStatus.date}" pattern="dd E" />
										</td>
										<c:choose>
											<c:when test="${empty dclzStatus.attendDt }">
												<td colspan="4">결근, 휴가, 이유 같은 거?</td>
											</c:when>
											<c:otherwise>
												<c:choose>
													<c:when test="${dclzStatus.attendDt.hours gt 9 || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes gt 0) || (dclzStatus.attendDt.hours eq 9 && dclzStatus.attendDt.minutes eq 0 && dclzStatus.attendDt.seconds gt 0)}">
														<td style="color: #ff3838;">
													</c:when>
													<c:otherwise>
														<td>
													</c:otherwise>
												</c:choose>
												<fmt:formatDate value="${dclzStatus.attendDt}" pattern="HH:mm:ss" />
												</td>
												<td>
													<fmt:formatDate value="${dclzStatus.lvffcDt}" pattern="HH:mm:ss" />
												</td>
												<td><b>${dclzStatus.defaultTime }</b></td>
												<td>기본 ${dclzStatus.defaultTime } / 연장 ${dclzStatus.overTime } / 야간 ${dclzStatus.nightTime }</td>
											</c:otherwise>
										</c:choose>
									</tr>
									</c:forEach>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</c:if>
		</div>
		<!-- 1주차~5주차 -->
		<!-- 정상, 지각 -->
		<div style="margin-bottom: 50px;">
			<i class="fa-solid fa-circle fa-sm" style="color: #413e3e;"> 정상</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-circle fa-sm" style="color: #ff3838;"> 지각 </i>
		</div>
	</div>
</div>
<!-- 메뉴 옆 오른쪽 구역 끝 -->



<script src="${pageContext.request.contextPath}/resources/vendor/js/apps/chat.js"></script>
<c:if test="${not empty message }">
	<script>
		showToast("${message}", 'info');
		<c:remove var="message" scope="request"/>
	</script>
</c:if>
<script>
	function previous() {
		var year = "${year}";
		var month = "${month}";

		year = parseInt(year);
		month = parseInt(month);

		if (month === 1) {
			year--;
			month = 12;
		} else {
			month--;
		}

		location.href = "status?year=" + year + "&month=" + month;
	}

	function next() {
		var year = "${year}";
		var month = "${month}";

		year = parseInt(year);
		month = parseInt(month);

		if (month === 12) {
			year++;
			month = 1;
		} else {
			month++;
		}

		location.href = "status?year=" + year + "&month=" + month;
	}
</script>